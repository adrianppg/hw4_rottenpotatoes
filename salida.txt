Using the default profile...
Feature: search for movies by director
  
  As a movie buff
  So that I can find movies with my favorite director
  I want to include and serach on director information in movies I enter

  Background: movies in database      # features/search_movies.feature:7
    Given the following movies exist: # features/step_definitions/movie_steps.rb:3
      | title        | rating | director     | release_date |
      | Star Wars    | PG     | George Lucas | 1977-05-25   |
      | Blade Runner | PG     | Ridley Scott | 1982-06-25   |
      | Alien        | R      |              | 1979-05-25   |
      | THX-1138     | R      | George Lucas | 1971-03-11   |

  Scenario: add director to existing movie                # features/search_movies.feature:16
    When I go to the edit page for "Alien"                # features/step_definitions/web_steps.rb:48
    And I fill in "Director" with "Ridley Scott"          # features/step_definitions/web_steps.rb:60
    And I press "Update Movie Info"                       # features/step_definitions/web_steps.rb:52
      undefined method `same_director_path' for #<#<Class:0xcb6abdc>:0xca3ddf4> (ActionView::Template::Error)
      ./app/views/movies/show.html.haml:21:in `_app_views_movies_show_html_haml__1048434280_106019480'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/template.rb:144:in `block in render'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/notifications.rb:55:in `instrument'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/template.rb:142:in `render'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/template_renderer.rb:40:in `block (2 levels) in render_template'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/abstract_renderer.rb:33:in `block in instrument'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/notifications.rb:53:in `block in instrument'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/notifications.rb:53:in `instrument'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/abstract_renderer.rb:33:in `instrument'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/template_renderer.rb:39:in `block in render_template'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/template_renderer.rb:47:in `render_with_layout'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/template_renderer.rb:38:in `render_template'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/template_renderer.rb:12:in `block in render'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/abstract_renderer.rb:22:in `wrap_formats'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/template_renderer.rb:9:in `render'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_view/renderer/renderer.rb:17:in `render'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/abstract_controller/rendering.rb:120:in `_render_template'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/streaming.rb:250:in `_render_template'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/abstract_controller/rendering.rb:114:in `render_to_body'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/renderers.rb:30:in `render_to_body'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/compatibility.rb:43:in `render_to_body'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/abstract_controller/rendering.rb:99:in `render'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/rendering.rb:16:in `render'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
      /usr/local/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/instrumentation.rb:78:in `cleanup_view_runtime'
      /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.1.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/abstract_controller/base.rb:167:in `process_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/callbacks.rb:416:in `_run__777445586__process_action__646414515__callbacks'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/callbacks.rb:386:in `_run_process_action_callbacks'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/rescue.rb:17:in `process_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/notifications.rb:53:in `block in instrument'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/notifications.rb:53:in `instrument'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/params_wrapper.rb:201:in `process_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.1.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/abstract_controller/base.rb:121:in `process'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/abstract_controller/rendering.rb:45:in `process'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal.rb:193:in `dispatch'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal.rb:236:in `block in action'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/routing/route_set.rb:65:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/routing/route_set.rb:65:in `dispatch'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/routing/route_set.rb:29:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/route_set.rb:152:in `block in call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/code_generation.rb:96:in `block in recognize'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/code_generation.rb:96:in `optimized_each'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/code_generation.rb:95:in `recognize'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-mount-0.8.3/lib/rack/mount/route_set.rb:141:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/routing/route_set.rb:531:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/etag.rb:23:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/conditionalget.rb:25:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/head.rb:14:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/flash.rb:243:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/session/abstract/id.rb:195:in `context'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/session/abstract/id.rb:190:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/cookies.rb:326:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.1.0/lib/active_record/query_cache.rb:62:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:477:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/callbacks.rb:392:in `_run_call_callbacks'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/callbacks.rb:28:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/sendfile.rb:101:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/cucumber-rails-1.3.0/lib/cucumber/rails/action_controller.rb:10:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/rack/logger.rb:13:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/methodoverride.rb:24:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/runtime.rb:17:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.1.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/lock.rb:15:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/middleware/static.rb:53:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.1.0/lib/rails/engine.rb:455:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/urlmap.rb:52:in `block in call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/urlmap.rb:46:in `each'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/urlmap.rb:46:in `call'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-test-0.6.1/lib/rack/mock_session.rb:30:in `request'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-test-0.6.1/lib/rack/test.rb:219:in `process_request'
      /usr/local/lib/ruby/gems/1.9.1/gems/rack-test-0.6.1/lib/rack/test.rb:57:in `get'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/rack_test/browser.rb:62:in `process'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/rack_test/browser.rb:39:in `block in follow_redirects!'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/rack_test/browser.rb:38:in `times'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/rack_test/browser.rb:38:in `follow_redirects!'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/rack_test/browser.rb:28:in `submit'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/rack_test/form.rb:64:in `submit'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/rack_test/node.rb:59:in `click'
      /usr/local/lib/ruby/gems/1.9.1/gems/cucumber-rails-1.3.0/lib/cucumber/rails/capybara/javascript_emulation.rb:16:in `click_with_javascript_emulation'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/element.rb:99:in `block in click'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/base.rb:46:in `wait_until'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/element.rb:99:in `click'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/node/actions.rb:38:in `click_button'
      (eval):2:in `click_button'
      /usr/local/lib/ruby/gems/1.9.1/gems/capybara-1.1.2/lib/capybara/dsl.rb:161:in `click_button'
      ./features/step_definitions/web_steps.rb:53:in `/^(?:|I )press "([^"]*)"$/'
      features/search_movies.feature:19:in `And I press "Update Movie Info"'
    Then the director of "Alien" should be "Ridley Scott" # features/search_movies.feature:20
      Undefined step: "the director of "Alien" should be "Ridley Scott"" (Cucumber::Undefined)
      features/search_movies.feature:20:in `Then the director of "Alien" should be "Ridley Scott"'

  Scenario: find movie with same director                       # features/search_movies.feature:22
    Given I am on the details page for "Star Wars"              # features/search_movies.feature:23
      Ambiguous match of "I am on the details page for "Star Wars"":
      
      features/step_definitions/movie_steps.rb:41:in `/^(?:|I )am on (.+)$/'
      features/step_definitions/web_steps.rb:44:in `/^(?:|I )am on (.+)$/'
      
      You can run again with --guess to make Cucumber be more smart about it
       (Cucumber::Ambiguous)
      features/search_movies.feature:23:in `Given I am on the details page for "Star Wars"'
    When I follow "Find Movies With Same Director"              # features/search_movies.feature:24
      Ambiguous match of "I follow "Find Movies With Same Director"":
      
      features/step_definitions/movie_steps.rb:37:in `/^(?:|I )follow "([^"]*)"$/'
      features/step_definitions/web_steps.rb:56:in `/^(?:|I )follow "([^"]*)"$/'
      
      You can run again with --guess to make Cucumber be more smart about it
       (Cucumber::Ambiguous)
      features/search_movies.feature:24:in `When I follow "Find Movies With Same Director"'
    Then I should be on the Similar Movies page for "Star Wars" # features/step_definitions/web_steps.rb:230
    And I should see "THX-1138"                                 # features/search_movies.feature:26
      Ambiguous match of "I should see "THX-1138"":
      
      features/step_definitions/movie_steps.rb:90:in `/^(?:|I )should see "([^"]*)"$/'
      features/step_definitions/web_steps.rb:105:in `/^(?:|I )should see "([^"]*)"$/'
      
      You can run again with --guess to make Cucumber be more smart about it
       (Cucumber::Ambiguous)
      features/search_movies.feature:26:in `And I should see "THX-1138"'
    But I should not see "Blade Runner"                         # features/search_movies.feature:27
      Ambiguous match of "I should not see "Blade Runner"":
      
      features/step_definitions/movie_steps.rb:108:in `/^(?:|I )should not see "([^"]*)"$/'
      features/step_definitions/web_steps.rb:123:in `/^(?:|I )should not see "([^"]*)"$/'
      
      You can run again with --guess to make Cucumber be more smart about it
       (Cucumber::Ambiguous)
      features/search_movies.feature:27:in `But I should not see "Blade Runner"'

  Scenario: can't find similar movies if we don't know director (sad path) # features/search_movies.feature:29
    Given I am on the details page for "Alien"                             # features/search_movies.feature:30
      Ambiguous match of "I am on the details page for "Alien"":
      
      features/step_definitions/movie_steps.rb:41:in `/^(?:|I )am on (.+)$/'
      features/step_definitions/web_steps.rb:44:in `/^(?:|I )am on (.+)$/'
      
      You can run again with --guess to make Cucumber be more smart about it
       (Cucumber::Ambiguous)
      features/search_movies.feature:30:in `Given I am on the details page for "Alien"'
    Then I should not see "Ridley Scott"                                   # features/search_movies.feature:31
      Ambiguous match of "I should not see "Ridley Scott"":
      
      features/step_definitions/movie_steps.rb:108:in `/^(?:|I )should not see "([^"]*)"$/'
      features/step_definitions/web_steps.rb:123:in `/^(?:|I )should not see "([^"]*)"$/'
      
      You can run again with --guess to make Cucumber be more smart about it
       (Cucumber::Ambiguous)
      features/search_movies.feature:31:in `Then I should not see "Ridley Scott"'
    When I follow "Find Movies With Same Director"                         # features/search_movies.feature:32
      Ambiguous match of "I follow "Find Movies With Same Director"":
      
      features/step_definitions/movie_steps.rb:37:in `/^(?:|I )follow "([^"]*)"$/'
      features/step_definitions/web_steps.rb:56:in `/^(?:|I )follow "([^"]*)"$/'
      
      You can run again with --guess to make Cucumber be more smart about it
       (Cucumber::Ambiguous)
      features/search_movies.feature:32:in `When I follow "Find Movies With Same Director"'
    Then I should be on the home page                                      # features/step_definitions/web_steps.rb:230
    And I should see "'Alien' has no director info"                        # features/search_movies.feature:34
      Ambiguous match of "I should see "'Alien' has no director info"":
      
      features/step_definitions/movie_steps.rb:90:in `/^(?:|I )should see "([^"]*)"$/'
      features/step_definitions/web_steps.rb:105:in `/^(?:|I )should see "([^"]*)"$/'
      
      You can run again with --guess to make Cucumber be more smart about it
       (Cucumber::Ambiguous)
      features/search_movies.feature:34:in `And I should see "'Alien' has no director info"'

Failing Scenarios:
cucumber features/search_movies.feature:16 # Scenario: add director to existing movie
cucumber features/search_movies.feature:22 # Scenario: find movie with same director
cucumber features/search_movies.feature:29 # Scenario: can't find similar movies if we don't know director (sad path)

3 scenarios (3 failed)
17 steps (9 failed, 2 skipped, 1 undefined, 5 passed)
0m44.721s

You can implement step definitions for undefined steps with these snippets:

Then /^the director of "([^"]*)" should be "([^"]*)"$/ do |arg1, arg2|
  pending # express the regexp above with the code you wish you had
end

